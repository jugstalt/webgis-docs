
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="de">
  <head>
    <meta charset="utf-8" />
    <title>Spezielle Themen &#8212; WebGIS Cloud Dokumentation 2020 Dokumentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/translations.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="../../../genindex.html" />
    <link rel="search" title="Suche" href="../../../search.html" />
    <link rel="next" title="Parametrierter Aufruf von Karten" href="../ParametrierterAufruf/index.html" />
    <link rel="prev" title="Usability" href="usability.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="spezielle-themen">
<h1>Spezielle Themen<a class="headerlink" href="#spezielle-themen" title="Link zu dieser Überschrift">¶</a></h1>
<div class="section" id="spatialrefencesystem">
<h2>SpatialRefenceSystem<a class="headerlink" href="#spatialrefencesystem" title="Link zu dieser Überschrift">¶</a></h2>
<p>Für eine WebGIS Karte können verschiedene Koordinatensystem verwendet werden. Bestimmte Berechnungen (z.B. das Messen einer Strecke) wird im jeweiligen Kartensystem kartesisch durchgeführt. Kartesisch bedeutet in diesem Zusammenhang, dass für eine Berechnung einfach die (X, Y) Werte verwendet werden.</p>
<p>Dabei kann zu Problemen kommen, wenn das Koordinatensystem große Verzerrungen aufweist, weil dann ebenfalls die (X, Y) Werte „verzerrt“ sind. Gemessene Distanzen entsprechen so nicht mehr der Distanz in der Natur. Ein Beispiel ist die WebMercator Projektion, die in unsere Breite schon eine sehr hohe Verzerrung beim Hochwert aufweist. Gemessene Längen und Flächen wären in dieser Projektion hier immer zu groß.</p>
<p>Abhilfe kann hier die Variable calcCrs schaffen. Durch diese kann der EPSG Code für ein Koordinatensystem angegeben werden, in dem Berechnungen durchgeführt werden:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">mapUrlName</span> <span class="o">===</span> <span class="s2">&quot;Basemap_at&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">calcCrs</span> <span class="o">=</span> <span class="mi">31287</span><span class="p">;</span>  <span class="c1">// Lambert</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Für diese Karte würden Berechnungen etwa im österreichweiten Lambert System durchgeführt werden. Alle Koordinaten für die Berechnung würden somit erst im Hintergrund nach Lambert transformiert werden. Mit den so erhaltenen Koordinaten wird die Berechnung durchgeführt.</p>
<p>Beispiele:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">calcCrs</span> <span class="o">=</span> <span class="mi">31256</span><span class="p">;</span>    <span class="c1">// Rechnen im GK-M34</span>
</pre></div>
</div>
<p>Wird dieser Wert nicht angeben, erfolgt die Berechnung immer im jeweiligen Karten Koordinatensystem. Ist dieses eine geographisches Koordinatensystem oder WebMercator, empfiehlt es sich, die Variable zu setzen!</p>
</div>
<div class="section" id="webgis-und-gnss">
<h2>WebGIS und GNSS<a class="headerlink" href="#webgis-und-gnss" title="Link zu dieser Überschrift">¶</a></h2>
<p>Will man mit WebGIS über eine externe GPS Antenne vermessen, kann dies auch über die custom.js eingestellt werden. Da es sich hierbei um eine eher spezielle Anwendung handelt, und das Thema eher umfangreich ist, wird es hier nur rudimentär beschrieben. Eine genauere Beschreibung erfolgt bei Bedarf auf Nachfrage.</p>
<p>Die verantwortlichen Einträge lauten:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition</span> <span class="o">=</span> <span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition_watch</span><span class="p">;</span>

<span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition</span><span class="p">.</span><span class="nx">minAcc</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>   <span class="c1">// [m]</span>
<span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition</span><span class="p">.</span><span class="nx">maxAgeSeconds</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span>  <span class="c1">// [s]</span>
<span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition</span><span class="p">.</span><span class="nx">useWithSketchTool</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></div>
</div>
<p>Der letzte Eintrag ist dafür verantwortlich, dass man die GPS in allen Sketchtools verwenden kann. Der Anwender erhält dazu eine zusätzlich Bubble „GPS“. Diese in standardmäßig deaktiviert (grau). Zieht man die Bubble aus dem Inaktiv-Bereich, ändert sie ihre Farbe von Rot auf Grün, je nachdem ob die eingestellt Genauigkeit erreicht wurde. Ist sowohl Bubble als auch das angezeigt Positionsfadenkreuz grün, kann der Anwender durch einen Klick auf die Bubble, eine Vertex für den Sketch übernehmen. Dies kann er so lange wieder holen (Karte folgt dem Fadenkreuz bei Bewegung) bis er die Bubble wieder zurück in den Inaktiv-Bereich schiebt.</p>
<img alt="../../../_images/image7.png" src="../../../_images/image7.png" />
<p>Info: Solange die Bubble aktiv ist, kann ein Vertex nur mit diesem Werkzeug gesetzt werden!</p>
<p>Soll noch eine zusätzliche Helmert Transformation (2D) angebracht werden, um eventuelle Spannungen im Festpunktfeld auszugleichen, kann diese in folgender Form angegeben werden:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">webgis</span><span class="p">.</span><span class="nx">continuousPosition</span><span class="p">.</span><span class="nx">helmert2d</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">srs</span><span class="o">:</span> <span class="mi">31256</span><span class="p">,</span>
        <span class="nx">Cx</span><span class="o">:</span>  <span class="mf">0.600</span><span class="p">,</span>
        <span class="nx">Cy</span><span class="o">:</span> <span class="o">-</span><span class="mf">0.234</span><span class="p">,</span>
        <span class="nx">Rx</span><span class="o">:</span> <span class="o">-</span><span class="mf">67946.151</span><span class="p">,</span>
        <span class="nx">Ry</span><span class="o">:</span> <span class="mf">215079.498</span><span class="p">,</span>
        <span class="nx">r</span><span class="o">:</span> <span class="mf">399.9992</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">200</span><span class="p">,</span>
        <span class="nx">scale</span><span class="o">:</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="mf">6.576</span> <span class="o">*</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Gibt es unterschiedliche räumliche getrennt Transformationen können diese über ein „Transformations Info Service“ abgeholt werden.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">webgis</span><span class="p">.</span><span class="nx">continuousPosition</span><span class="p">.</span><span class="nx">useTransformationService</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></div>
</div>
<p>Dieses Transformations Info Service ist ein WebGIS Dienst. Er liefert die Definitionen der einezelnen Transformationen. Die Informationen der einzelnen Transformationen müssen im etc/trafo Verzeichnis in einer Datei helmert.json liegen. Die Form dieser Datei sieht in etwa so aus:</p>
<img alt="../../../_images/image8.png" src="../../../_images/image8.png" />
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">WebGIS Cloud Dokumentation</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Inhalt:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../DataLinq/index.html">DataLinq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../MapBuilder/index.html">Map Builder</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Karten Viewer</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Parametrierung und Administration von Karten</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Tutorials/index.html">Tutorials</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Karten Viewer</a><ul>
  <li><a href="../index.html">Parametrierung und Administration von Karten</a><ul>
  <li><a href="index.html">custom.js</a><ul>
      <li>Previous: <a href="usability.html" title="vorheriges Kapitel">Usability</a></li>
      <li>Next: <a href="../ParametrierterAufruf/index.html" title="nächstes Kapitel">Parametrierter Aufruf von Karten</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Schnellsuche</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Los" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, ENI.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/KartenViewer/Parametrierung_Administration/CustomJS/speziellethemen.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>