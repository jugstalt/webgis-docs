

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Spezielle Themen &mdash; webgis 1.0 Dokumentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/js/eni.js"></script>
        <script src="../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/eni.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="../../genindex.html" />
    <link rel="search" title="Suche" href="../../search.html" />
    <link rel="next" title="Parametrierter Aufruf von Karten" href="../ParametrierterAufruf/index.html" />
    <link rel="prev" title="Usability" href="usability.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> webgis
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Inhalt:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../API/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DataLinq/index.html">DataLinq</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Karten Viewer</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../GDI/index.html">Darstellungsvarianten &amp; Schemes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">custom.js</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="allgemeines.html">Allgemeines</a></li>
<li class="toctree-l3"><a class="reference internal" href="benutzerdefmarker.html">Benutzerdefinierte Marker</a></li>
<li class="toctree-l3"><a class="reference internal" href="usability.html">Usability</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Spezielle Themen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#spatialrefencesystem">SpatialRefenceSystem</a></li>
<li class="toctree-l4"><a class="reference internal" href="#webgis-und-gnss">WebGIS und GNSS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ParametrierterAufruf/index.html">Parametrierter Aufruf von Karten</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">webgis</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Karten Viewer</a> &raquo;</li>
        
          <li><a href="index.html">custom.js</a> &raquo;</li>
        
      <li>Spezielle Themen</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/KartenViewer/CustomJS/speziellethemen.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="spezielle-themen">
<h1>Spezielle Themen<a class="headerlink" href="#spezielle-themen" title="Link zu dieser Überschrift">¶</a></h1>
<div class="section" id="spatialrefencesystem">
<h2>SpatialRefenceSystem<a class="headerlink" href="#spatialrefencesystem" title="Link zu dieser Überschrift">¶</a></h2>
<p>Für eine WebGIS Karte können verschiedene Koordinatensystem verwendet werden. Bestimmte Berechnungen (z.B. das Messen einer Strecke) wird im jeweiligen Kartensystem kartesisch durchgeführt. Kartesisch bedeutet in diesem Zusammenhang, dass für eine Berechnung einfach die (X, Y) Werte verwendet werden.</p>
<p>Dabei kann zu Problemen kommen, wenn das Koordinatensystem große Verzerrungen aufweist, weil dann ebenfalls die (X, Y) Werte „verzerrt“ sind. Gemessene Distanzen entsprechen so nicht mehr der Distanz in der Natur. Ein Beispiel ist die WebMercator Projektion, die in unsere Breite schon eine sehr hohe Verzerrung beim Hochwert aufweist. Gemessene Längen und Flächen wären in dieser Projektion hier immer zu groß.</p>
<p>Abhilfe kann hier die Variable calcCrs schaffen. Durch diese kann der EPSG Code für ein Koordinatensystem angegeben werden, in dem Berechnungen durchgeführt werden:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">mapUrlName</span> <span class="o">===</span> <span class="s2">&quot;Basemap_at&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">calcCrs</span> <span class="o">=</span> <span class="mi">31287</span><span class="p">;</span>  <span class="c1">// Lambert</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Für diese Karte würden Berechnungen etwa im österreichweiten Lambert System durchgeführt werden. Alle Koordinaten für die Berechnung würden somit erst im Hintergrund nach Lambert transformiert werden. Mit den so erhaltenen Koordinaten wird die Berechnung durchgeführt.</p>
<p>Beispiele:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">calcCrs</span> <span class="o">=</span> <span class="mi">31256</span><span class="p">;</span>    <span class="c1">// Rechnen im GK-M34</span>
</pre></div>
</div>
<p>Wird dieser Wert nicht angeben, erfolgt die Berechnung immer im jeweiligen Karten Koordinatensystem. Ist dieses eine geographisches Koordinatensystem oder WebMercator, empfiehlt es sich, die Variable zu setzen!</p>
</div>
<div class="section" id="webgis-und-gnss">
<h2>WebGIS und GNSS<a class="headerlink" href="#webgis-und-gnss" title="Link zu dieser Überschrift">¶</a></h2>
<p>Will man mit WebGIS über eine externe GPS Antenne vermessen, kann dies auch über die custom.js eingestellt werden. Da es sich hierbei um eine eher spezielle Anwendung handelt, und das Thema eher umfangreich ist, wird es hier nur rudimentär beschrieben. Eine genauere Beschreibung erfolgt bei Bedarf auf Nachfrage.</p>
<p>Die verantwortlichen Einträge lauten:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition</span> <span class="o">=</span> <span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition_watch</span><span class="p">;</span>

<span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition</span><span class="p">.</span><span class="nx">minAcc</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>   <span class="c1">// [m]</span>
<span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition</span><span class="p">.</span><span class="nx">maxAgeSeconds</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span>  <span class="c1">// [s]</span>
<span class="nx">webgis</span><span class="p">.</span><span class="nx">currentPosition</span><span class="p">.</span><span class="nx">useWithSketchTool</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></div>
</div>
<p>Der letzte Eintrag ist dafür verantwortlich, dass man die GPS in allen Sketchtools verwenden kann. Der Anwender erhält dazu eine zusätzlich Bubble „GPS“. Diese in standardmäßig deaktiviert (grau). Zieht man die Bubble aus dem Inaktiv-Bereich, ändert sie ihre Farbe von Rot auf Grün, je nachdem ob die eingestellt Genauigkeit erreicht wurde. Ist sowohl Bubble als auch das angezeigt Positionsfadenkreuz grün, kann der Anwender durch einen Klick auf die Bubble, eine Vertex für den Sketch übernehmen. Dies kann er so lange wieder holen (Karte folgt dem Fadenkreuz bei Bewegung) bis er die Bubble wieder zurück in den Inaktiv-Bereich schiebt.</p>
<img alt="../../_images/image7.png" src="../../_images/image7.png" />
<p>Info: Solange die Bubble aktiv ist, kann ein Vertex nur mit diesem Werkzeug gesetzt werden!</p>
<p>Soll noch eine zusätzliche Helmert Transformation (2D) angebracht werden, um eventuelle Spannungen im Festpunktfeld auszugleichen, kann diese in folgender Form angegeben werden:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">webgis</span><span class="p">.</span><span class="nx">continuousPosition</span><span class="p">.</span><span class="nx">helmert2d</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">srs</span><span class="o">:</span> <span class="mi">31256</span><span class="p">,</span>
        <span class="nx">Cx</span><span class="o">:</span>  <span class="mf">0.600</span><span class="p">,</span>
        <span class="nx">Cy</span><span class="o">:</span> <span class="o">-</span><span class="mf">0.234</span><span class="p">,</span>
        <span class="nx">Rx</span><span class="o">:</span> <span class="o">-</span><span class="mf">67946.151</span><span class="p">,</span>
        <span class="nx">Ry</span><span class="o">:</span> <span class="mf">215079.498</span><span class="p">,</span>
        <span class="nx">r</span><span class="o">:</span> <span class="mf">399.9992</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">200</span><span class="p">,</span>
        <span class="nx">scale</span><span class="o">:</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="mf">6.576</span> <span class="o">*</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Gibt es unterschiedliche räumliche getrennt Transformationen können diese über ein „Transformations Info Service“ abgeholt werden.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">webgis</span><span class="p">.</span><span class="nx">continuousPosition</span><span class="p">.</span><span class="nx">useTransformationService</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></div>
</div>
<p>Dieses Transformations Info Service ist ein WebGIS Dienst. Er liefert die Definitionen der einezelnen Transformationen. Die Informationen der einzelnen Transformationen müssen im etc/trafo Verzeichnis in einer Datei helmert.json liegen. Die Form dieser Datei sieht in etwa so aus:</p>
<img alt="../../_images/image8.png" src="../../_images/image8.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ParametrierterAufruf/index.html" class="btn btn-neutral float-right" title="Parametrierter Aufruf von Karten" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usability.html" class="btn btn-neutral float-left" title="Usability" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ENI

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>